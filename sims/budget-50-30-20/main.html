<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>50/30/20 Budget Calculator</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: white;
            padding: 20px;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        h1 {
            font-size: 1.8rem;
            margin-bottom: 10px;
            color: #1a1a1a;
        }

        .subtitle {
            color: #666;
            margin-bottom: 25px;
            font-size: 0.95rem;
        }

        .controls {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 25px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .control-group {
            margin-bottom: 20px;
        }

        .control-group:last-child {
            margin-bottom: 0;
        }

        label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 0.95rem;
        }

        .income-control {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        input[type="range"] {
            flex: 1;
            height: 8px;
            border-radius: 5px;
            background: #ddd;
            outline: none;
            -webkit-appearance: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #007bff;
            cursor: pointer;
        }

        input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #007bff;
            cursor: pointer;
            border: none;
        }

        input[type="number"] {
            width: 120px;
            padding: 8px 12px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: 600;
        }

        .toggle-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .toggle-switch {
            position: relative;
            width: 50px;
            height: 26px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: 0.3s;
            border-radius: 26px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: 0.3s;
            border-radius: 50%;
        }

        input:checked + .toggle-slider {
            background-color: #007bff;
        }

        input:checked + .toggle-slider:before {
            transform: translateX(24px);
        }

        .custom-percentages {
            display: none;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 2px solid #e0e0e0;
        }

        .custom-percentages.active {
            display: block;
        }

        .percentage-row {
            display: flex;
            gap: 15px;
            align-items: center;
            margin-bottom: 12px;
        }

        .percentage-row label {
            width: 120px;
            margin-bottom: 0;
        }

        .percentage-row input[type="range"] {
            flex: 1;
        }

        .percentage-row .value {
            width: 50px;
            text-align: right;
            font-weight: 600;
            font-size: 1rem;
        }

        .warning {
            background: #fff3cd;
            color: #856404;
            padding: 10px 15px;
            border-radius: 6px;
            margin-top: 10px;
            font-size: 0.9rem;
            display: none;
        }

        .warning.active {
            display: block;
        }

        .chart-container {
            background: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 25px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            height: 280px;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .stat-label {
            font-size: 0.85rem;
            opacity: 0.95;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: 700;
        }

        .categories {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .category-card {
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            transition: transform 0.2s;
        }

        .category-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }

        .category-card.needs {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            color: white;
        }

        .category-card.wants {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            color: white;
        }

        .category-card.savings {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
        }

        .category-header {
            margin-bottom: 15px;
            padding-bottom: 12px;
            border-bottom: 2px solid rgba(255,255,255,0.3);
        }

        .category-title {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .category-amount {
            font-size: 2rem;
            font-weight: 800;
        }

        .category-percentage {
            font-size: 0.95rem;
            opacity: 0.9;
        }

        .category-items {
            list-style: none;
        }

        .category-items li {
            padding: 6px 0;
            font-size: 0.9rem;
            opacity: 0.95;
            border-bottom: 1px solid rgba(255,255,255,0.2);
        }

        .category-items li:last-child {
            border-bottom: none;
        }

        .category-items li:before {
            content: "â€¢ ";
            margin-right: 8px;
            font-weight: bold;
        }

        @media (max-width: 768px) {
            body {
                padding: 15px;
            }

            h1 {
                font-size: 1.5rem;
            }

            .income-control {
                flex-direction: column;
                align-items: stretch;
            }

            input[type="number"] {
                width: 100%;
            }

            .percentage-row {
                flex-direction: column;
                align-items: stretch;
            }

            .percentage-row label {
                width: 100%;
            }

            .percentage-row .value {
                width: 100%;
                text-align: left;
            }

            .chart-container {
                height: 250px;
            }

            .stat-value {
                font-size: 1.5rem;
            }

            .category-amount {
                font-size: 1.6rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>50/30/20 Budget Calculator</h1>
        <p class="subtitle">Apply the 50/30/20 budgeting rule to understand how to allocate your income across needs, wants, and savings.</p>

        <div class="controls">
            <div class="control-group">
                <label for="income">Monthly Take-Home Pay</label>
                <div class="income-control">
                    <input type="range" id="incomeSlider" min="1000" max="10000" step="100" value="3500">
                    <input type="number" id="incomeNumber" min="1000" max="10000" step="100" value="3500">
                </div>
            </div>

            <div class="control-group">
                <div class="toggle-container">
                    <label for="customToggle" style="margin-bottom: 0;">Use Custom Percentages</label>
                    <label class="toggle-switch">
                        <input type="checkbox" id="customToggle">
                        <span class="toggle-slider"></span>
                    </label>
                </div>

                <div class="custom-percentages" id="customPercentages">
                    <div class="percentage-row">
                        <label for="needsPercent" style="color: #3b82f6;">Needs:</label>
                        <input type="range" id="needsPercent" min="0" max="100" step="5" value="50">
                        <span class="value" id="needsValue">50%</span>
                    </div>
                    <div class="percentage-row">
                        <label for="wantsPercent" style="color: #f59e0b;">Wants:</label>
                        <input type="range" id="wantsPercent" min="0" max="100" step="5" value="30">
                        <span class="value" id="wantsValue">30%</span>
                    </div>
                    <div class="percentage-row">
                        <label for="savingsPercent" style="color: #10b981;">Savings:</label>
                        <input type="range" id="savingsPercent" min="0" max="100" step="5" value="20">
                        <span class="value" id="savingsValue">20%</span>
                    </div>
                    <div class="warning" id="percentageWarning">
                        Warning: Percentages must sum to 100%. Current total: <span id="totalPercent">100</span>%
                    </div>
                </div>
            </div>
        </div>

        <div class="chart-container">
            <canvas id="budgetChart"></canvas>
        </div>

        <div class="stats">
            <div class="stat-card">
                <div class="stat-label">Annual Income</div>
                <div class="stat-value" id="annualIncome">$42,000</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Annual Savings</div>
                <div class="stat-value" id="annualSavings">$8,400</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Monthly Discretionary</div>
                <div class="stat-value" id="discretionary">$1,750</div>
            </div>
        </div>

        <div class="categories">
            <div class="category-card needs">
                <div class="category-header">
                    <div class="category-title">Needs</div>
                    <div class="category-amount" id="needsAmount">$1,750</div>
                    <div class="category-percentage" id="needsPercentDisplay">50% of income</div>
                </div>
                <ul class="category-items">
                    <li>Housing (rent/mortgage)</li>
                    <li>Utilities (electricity, water, gas)</li>
                    <li>Groceries & essential food</li>
                    <li>Insurance (health, auto, home)</li>
                    <li>Minimum debt payments</li>
                    <li>Transportation (car payment, gas)</li>
                    <li>Basic clothing</li>
                </ul>
            </div>

            <div class="category-card wants">
                <div class="category-header">
                    <div class="category-title">Wants</div>
                    <div class="category-amount" id="wantsAmount">$1,050</div>
                    <div class="category-percentage" id="wantsPercentDisplay">30% of income</div>
                </div>
                <ul class="category-items">
                    <li>Dining out & restaurants</li>
                    <li>Entertainment (movies, concerts)</li>
                    <li>Subscriptions (streaming, gym)</li>
                    <li>Shopping & fashion</li>
                    <li>Hobbies & recreation</li>
                    <li>Travel & vacations</li>
                    <li>Luxury items</li>
                </ul>
            </div>

            <div class="category-card savings">
                <div class="category-header">
                    <div class="category-title">Savings & Debt</div>
                    <div class="category-amount" id="savingsAmount">$700</div>
                    <div class="category-percentage" id="savingsPercentDisplay">20% of income</div>
                </div>
                <ul class="category-items">
                    <li>Emergency fund contributions</li>
                    <li>Retirement accounts (401k, IRA)</li>
                    <li>Investment accounts</li>
                    <li>Extra debt payments</li>
                    <li>College/education savings</li>
                    <li>Down payment savings</li>
                    <li>Financial goals</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // State
        let income = 3500;
        let customMode = false;
        let percentages = {
            needs: 50,
            wants: 30,
            savings: 20
        };

        // Elements
        const incomeSlider = document.getElementById('incomeSlider');
        const incomeNumber = document.getElementById('incomeNumber');
        const customToggle = document.getElementById('customToggle');
        const customPercentages = document.getElementById('customPercentages');
        const needsPercent = document.getElementById('needsPercent');
        const wantsPercent = document.getElementById('wantsPercent');
        const savingsPercent = document.getElementById('savingsPercent');
        const needsValue = document.getElementById('needsValue');
        const wantsValue = document.getElementById('wantsValue');
        const savingsValue = document.getElementById('savingsValue');
        const percentageWarning = document.getElementById('percentageWarning');
        const totalPercent = document.getElementById('totalPercent');

        // Chart
        const ctx = document.getElementById('budgetChart').getContext('2d');
        const budgetChart = new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: ['Needs', 'Wants', 'Savings & Debt'],
                datasets: [{
                    data: [50, 30, 20],
                    backgroundColor: [
                        '#3b82f6',
                        '#f59e0b',
                        '#10b981'
                    ],
                    borderWidth: 0,
                    hoverOffset: 10
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            padding: 15,
                            font: {
                                size: 13,
                                family: 'system-ui, -apple-system, sans-serif'
                            }
                        }
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                const label = context.label || '';
                                const percentage = context.parsed || 0;
                                const amount = (income * percentage / 100).toFixed(2);
                                return `${label}: ${percentage}% ($${formatNumber(amount)})`;
                            }
                        }
                    }
                },
                animation: {
                    animateRotate: true,
                    animateScale: true,
                    duration: 750
                }
            }
        });

        // Format number with commas
        function formatNumber(num) {
            return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        }

        // Update all displays
        function updateDisplay() {
            const needs = income * percentages.needs / 100;
            const wants = income * percentages.wants / 100;
            const savings = income * percentages.savings / 100;

            // Update chart
            budgetChart.data.datasets[0].data = [
                percentages.needs,
                percentages.wants,
                percentages.savings
            ];
            budgetChart.update();

            // Update amounts
            document.getElementById('needsAmount').textContent = `$${formatNumber(needs.toFixed(0))}`;
            document.getElementById('wantsAmount').textContent = `$${formatNumber(wants.toFixed(0))}`;
            document.getElementById('savingsAmount').textContent = `$${formatNumber(savings.toFixed(0))}`;

            // Update percentages
            document.getElementById('needsPercentDisplay').textContent = `${percentages.needs}% of income`;
            document.getElementById('wantsPercentDisplay').textContent = `${percentages.wants}% of income`;
            document.getElementById('savingsPercentDisplay').textContent = `${percentages.savings}% of income`;

            // Update stats
            document.getElementById('annualIncome').textContent = `$${formatNumber((income * 12).toFixed(0))}`;
            document.getElementById('annualSavings').textContent = `$${formatNumber((savings * 12).toFixed(0))}`;
            document.getElementById('discretionary').textContent = `$${formatNumber((wants + savings).toFixed(0))}`;
        }

        // Check percentage sum
        function checkPercentageSum() {
            const total = percentages.needs + percentages.wants + percentages.savings;
            totalPercent.textContent = total;

            if (total !== 100) {
                percentageWarning.classList.add('active');
            } else {
                percentageWarning.classList.remove('active');
            }

            return total === 100;
        }

        // Income slider/number sync
        incomeSlider.addEventListener('input', (e) => {
            income = parseInt(e.target.value);
            incomeNumber.value = income;
            updateDisplay();
        });

        incomeNumber.addEventListener('input', (e) => {
            let value = parseInt(e.target.value);
            if (value < 1000) value = 1000;
            if (value > 10000) value = 10000;
            income = value;
            incomeSlider.value = value;
            incomeNumber.value = value;
            updateDisplay();
        });

        // Custom mode toggle
        customToggle.addEventListener('change', (e) => {
            customMode = e.target.checked;

            if (customMode) {
                customPercentages.classList.add('active');
            } else {
                customPercentages.classList.remove('active');
                // Reset to 50/30/20
                percentages = { needs: 50, wants: 30, savings: 20 };
                needsPercent.value = 50;
                wantsPercent.value = 30;
                savingsPercent.value = 20;
                needsValue.textContent = '50%';
                wantsValue.textContent = '30%';
                savingsValue.textContent = '20%';
                percentageWarning.classList.remove('active');
                updateDisplay();
            }
        });

        // Percentage sliders
        needsPercent.addEventListener('input', (e) => {
            percentages.needs = parseInt(e.target.value);
            needsValue.textContent = `${percentages.needs}%`;
            checkPercentageSum();
            updateDisplay();
        });

        wantsPercent.addEventListener('input', (e) => {
            percentages.wants = parseInt(e.target.value);
            wantsValue.textContent = `${percentages.wants}%`;
            checkPercentageSum();
            updateDisplay();
        });

        savingsPercent.addEventListener('input', (e) => {
            percentages.savings = parseInt(e.target.value);
            savingsValue.textContent = `${percentages.savings}%`;
            checkPercentageSum();
            updateDisplay();
        });

        // Initialize
        updateDisplay();
    </script>
</body>
</html>
